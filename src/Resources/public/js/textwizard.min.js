var TextWizard={textWizard:function(e){var t=$(e),n=function(e){var c,i,a,r;e.getElements("button").each(function(l){if(!l.hasEvent("click"))switch(l.getProperty("data-command")){case"copy":l.addEvent("click",function(){Backend.getScrollOffset(),c=e.clone(!0).inject(e,"after"),(i=e.getFirst("input"))&&(c.getFirst("input").value=i.value),c.getFirst("input").select(),n(c)});break;case"new":l.addEvent("click",function(){Backend.getScrollOffset(),c=e.clone(!0).inject(e,"after"),(i=e.getFirst("input"))&&(c.getFirst("input").value=""),c.getFirst("input").select(),n(c)});break;case"delete":l.addEvent("click",function(){Backend.getScrollOffset(),1<t.getChildren().length&&e.destroy()});break;case null:l.addEvent("keydown",function(n){38==n.event.keyCode?(n.preventDefault(),(a=e.getPrevious("li"))?e.inject(a,"before"):e.inject(t,"bottom"),l.focus()):40==n.event.keyCode&&(n.preventDefault(),(r=e.getNext("li"))?e.inject(r,"after"):e.inject(t.getFirst("li"),"before"),l.focus())})}})};new Sortables(t,{constrain:!0,opacity:.6,handle:".drag-handle"}),t.getChildren().each(function(e){n(e)})}};
